(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{OpKh:function(e,r,n){"use strict";n.r(r),n.d(r,"AuthenticationModule",function(){return V});var t=n("iInd"),i=n("SVse"),o=n("G0yt"),a=n("8Y7J");let s=(()=>{class e{ngAfterViewInit(){}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=a.Jb({type:e,selectors:[["app-not-found"]],decls:10,vars:0,consts:[[1,"error-box"],[1,"error-body","text-center"],[1,"error-title","text-danger"],[1,"text-uppercase","error-subtitle"],[1,"text-muted","m-t-30","m-b-30"],["href","/",1,"btn","btn-danger","btn-rounded","waves-effect","waves-light","m-b-40"]],template:function(e,r){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"h1",2),a.Ec(3,"404"),a.Tb(),a.Ub(4,"h3",3),a.Ec(5,"PAGE NOT FOUND !"),a.Tb(),a.Ub(6,"p",4),a.Ec(7,"Get outta here!"),a.Tb(),a.Ub(8,"a",5),a.Ec(9,"HOME"),a.Tb(),a.Tb(),a.Tb())},encapsulation:2}),e})();var c=n("6CRC"),l=n("7dP1"),d=n("EApP"),b=n("s7LF");function u(e,r){1&e&&(a.Ub(0,"div",35),a.Ec(1,"Required"),a.Tb())}function m(e,r){1&e&&(a.Ub(0,"div",35),a.Ec(1,"Required"),a.Tb())}function p(e,r){1&e&&a.Qb(0,"span",36)}var g=function(e,r,n,t){return new(n||(n=Promise))(function(i,o){function a(e){try{c(t.next(e))}catch(r){o(r)}}function s(e){try{c(t.throw(e))}catch(r){o(r)}}function c(e){var r;e.done?i(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(a,s)}c((t=t.apply(e,r||[])).next())})};function f(e,r){1&e&&(a.Ub(0,"div",32),a.Ub(1,"span",10),a.Qb(2,"i",33),a.Tb(),a.Tb())}function h(e,r){1&e&&(a.Ub(0,"div",34),a.Ec(1,"Required"),a.Tb())}function v(e,r){1&e&&(a.Ub(0,"div",34),a.Ec(1,"Must be at least 3 characters"),a.Tb())}function U(e,r){1&e&&(a.Ub(0,"div",34),a.Ec(1,"Cannot exceed 255 characters"),a.Tb())}function T(e,r){1&e&&(a.Ub(0,"div",34),a.Ec(1,"Username can only contain letters, numbers, dashes, and underscores"),a.Tb())}function C(e,r){1&e&&(a.Ub(0,"div",34),a.Ec(1,"Username is already taken"),a.Tb())}function w(e,r){1&e&&(a.Ub(0,"div",32),a.Ub(1,"span",10),a.Qb(2,"i",33),a.Tb(),a.Tb())}function M(e,r){1&e&&(a.Ub(0,"div",34),a.Ec(1,"Required"),a.Tb())}function k(e,r){1&e&&(a.Ub(0,"div",34),a.Ec(1,"Must be a valid email address"),a.Tb())}function y(e,r){1&e&&(a.Ub(0,"div",34),a.Ec(1,"Email is already taken or invalid"),a.Tb())}function I(e,r){1&e&&(a.Ub(0,"div",32),a.Ub(1,"span",10),a.Qb(2,"i",33),a.Tb(),a.Tb())}function E(e,r){1&e&&(a.Ub(0,"div",34),a.Ec(1,"Required"),a.Tb())}function x(e,r){1&e&&(a.Ub(0,"div",34),a.Ec(1,"Must be at least 8 characters"),a.Tb())}function P(e,r){1&e&&(a.Ub(0,"div",32),a.Ub(1,"span",10),a.Qb(2,"i",33),a.Tb(),a.Tb())}function A(e,r){1&e&&(a.Ub(0,"div",34),a.Ec(1,"Required "),a.Tb())}function L(e,r){1&e&&(a.Ub(0,"div",34),a.Ec(1," Passwords must match"),a.Tb())}function q(e,r){1&e&&a.Qb(0,"span",35)}const Q=[{path:"",children:[{path:"404",component:s},{path:"login",component:(()=>{class e{constructor(e,r,n,t){this.authService=e,this.router=r,this.route=n,this.toastr=t,this.componentIsLoading=!1,this.userCredentials={email:localStorage.getItem("email")?localStorage.getItem("email"):"",password:""},this.remember=!1}ngOnInit(){c.a.isAuthenticated()&&this.router.navigate(["/"],{replaceUrl:!0}),this.remember=!!localStorage.getItem("email")}login(e){var r,n,t,i;return n=this,void 0,i=function*(){if(e.valid){this.componentIsLoading=!0;const e=yield this.authService.login(this.userCredentials,this.remember);"data"===e.type?this.router.navigate(["/"],{replaceUrl:!0}):null===(r=e.errors)||void 0===r||r.forEach(e=>{this.toastr.error(e.error,e.name.toUpperCase())}),this.componentIsLoading=!1}},new((t=void 0)||(t=Promise))(function(e,r){function o(e){try{s(i.next(e))}catch(n){r(n)}}function a(e){try{s(i.throw(e))}catch(n){r(n)}}function s(r){var n;r.done?e(r.value):(n=r.value,n instanceof t?n:new t(function(e){e(n)})).then(o,a)}s((i=i.apply(n,[])).next())})}}return e.\u0275fac=function(r){return new(r||e)(a.Pb(l.a),a.Pb(t.f),a.Pb(t.a),a.Pb(d.b))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-login"]],features:[a.Bb([l.a])],decls:47,vars:11,consts:[["id","login-background",1,"auth-wrapper","d-flex","no-block","justify-content-center","align-items-center"],[1,"auth-box","m-3","m-md-0"],["id","loginform"],[1,"logo"],[1,"font-medium","m-b-20"],[1,"row"],[1,"col-12"],["id","loginform","name","login",1,"form-horizontal","m-t-20",2,"min-width","350px"],["loginForm","ngForm"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"ti-user"],["type","email","name","email","placeholder","email@example.com","aria-label","email","required","",1,"form-control",3,"ngModel","disabled","ngModelChange","keyup.enter"],["email","ngModel"],["class","invalid-feedback d-block",4,"ngIf"],[1,"ti-key"],["type","password","name","password","placeholder","Password","aria-label","Password","required","",1,"form-control",3,"ngModel","disabled","ngModelChange","keyup.enter"],["password","ngModel"],[1,"form-group","row"],[1,"col-md-12"],[1,"custom-control","custom-checkbox","d-flex"],["type","checkbox","id","rememberUser","name","rememberUser",1,"custom-control-input",3,"disabled","ngModel","ngModelChange"],["rememberUser","ngModel"],["for","rememberUser",1,"custom-control-label","font-14"],[1,"form-group","text-center"],[1,"col-xs-12","p-b-20"],[1,"btn","btn-block","btn-lg","btn-primary",3,"click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"form-group","m-b-0","m-t-10"],[1,"col-sm-12","text-center"],["routerLink","/auth/register"],[1,"fas","fa-clipboard-check"],["href","javascript:void(0)"],[1,"fa","fa-lock"],[1,"invalid-feedback","d-block"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,r){if(1&e){const e=a.Vb();a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"h5",4),a.Ec(5,"jotsauce"),a.Tb(),a.Tb(),a.Ub(6,"div",5),a.Ub(7,"div",6),a.Ub(8,"form",7,8),a.Ub(10,"div",9),a.Ub(11,"div",10),a.Ub(12,"span",11),a.Qb(13,"i",12),a.Tb(),a.Tb(),a.Ub(14,"input",13,14),a.ec("ngModelChange",function(e){return r.userCredentials.email=e})("keyup.enter",function(){a.wc(e);const n=a.tc(9);return r.login(n.form)}),a.Tb(),a.Cc(16,u,2,0,"div",15),a.Tb(),a.Ub(17,"div",9),a.Ub(18,"div",10),a.Ub(19,"span",11),a.Qb(20,"i",16),a.Tb(),a.Tb(),a.Ub(21,"input",17,18),a.ec("ngModelChange",function(e){return r.userCredentials.password=e})("keyup.enter",function(){a.wc(e);const n=a.tc(9);return r.login(n.form)}),a.Tb(),a.Cc(23,m,2,0,"div",15),a.Tb(),a.Ub(24,"div",19),a.Ub(25,"div",20),a.Ub(26,"div",21),a.Ub(27,"input",22,23),a.ec("ngModelChange",function(e){return r.remember=e}),a.Tb(),a.Ub(29,"label",24),a.Ec(30,"Remember me"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(31,"div",25),a.Ub(32,"div",26),a.Ub(33,"a",27),a.ec("click",function(){a.wc(e);const n=a.tc(9);return r.login(n.form)}),a.Cc(34,p,1,0,"span",28),a.Ec(35," Login "),a.Tb(),a.Tb(),a.Tb(),a.Ub(36,"div",29),a.Ub(37,"div",30),a.Ub(38,"div",30),a.Ub(39,"a",31),a.Qb(40,"i",32),a.Ec(41," Register"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(42,"div",29),a.Ub(43,"div",30),a.Ub(44,"a",33),a.Qb(45,"i",34),a.Ec(46," Forgot password?"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.tc(9),n=a.tc(15),t=a.tc(22);a.Cb(14),a.mc("ngModel",r.userCredentials.email)("disabled",r.componentIsLoading),a.Cb(2),a.mc("ngIf",(null==n.errors?null:n.errors.required)&&e.form.touched),a.Cb(5),a.mc("ngModel",r.userCredentials.password)("disabled",r.componentIsLoading),a.Cb(2),a.mc("ngIf",(null==t.errors?null:t.errors.required)&&e.form.touched),a.Cb(4),a.mc("disabled",r.componentIsLoading)("ngModel",r.remember),a.Cb(6),a.Hb("disabled",r.componentIsLoading),a.Cb(1),a.mc("ngIf",r.componentIsLoading)}},directives:[b.q,b.i,b.j,b.b,b.o,b.h,b.k,i.k,b.a,t.i],styles:["#login-background[_ngcontent-%COMP%]{background:url(/jotsauce-angular/woods.c6895b816a0bcb752b0b.jpg) no-repeat 50%}"]}),e})()},{path:"register",component:(()=>{class e{constructor(e,r,n){this.authService=e,this.router=r,this.toastr=n,this.componentIsLoading=!1,this.registerModel={},this.accountAvailability={},this.usernameAvailable=!1,this.emailAvailable=!1,this.passwordValid=!1,this.confirmPasswordValid=!1}ngOnInit(){c.a.isAuthenticated()&&this.router.navigate(["/"],{replaceUrl:!0})}register(e){var r;return g(this,void 0,void 0,function*(){if(e.valid)if(this.stringsMatch(e.value.password,e.value.passwordConfirmation)){e.controls.passwordConfirmation.setErrors({mustMatch:!1}),this.componentIsLoading=!0;const n=yield this.authService.register(this.registerModel);"data"===n.type?(localStorage.setItem("email",n.data.email),this.router.navigate(["auth/login"],{replaceUrl:!0})):null===(r=n.errors)||void 0===r||r.forEach(e=>{this.toastr.error(e.error,e.name.toUpperCase())}),this.componentIsLoading=!1}else e.controls.passwordConfirmation.setErrors({mustMatch:!0})})}checkUsernameAvailability(e){var r;return g(this,void 0,void 0,function*(){if(e.controls.username.valid){this.accountAvailability.username=this.registerModel.username;const n=yield this.authService.checkUsernameAvailability(this.accountAvailability);"data"===n.type?this.usernameAvailable=n.data:(e.controls.username.setErrors({usernameTaken:!0}),null===(r=n.errors)||void 0===r||r.forEach(e=>{this.toastr.error(e.error,e.name.toUpperCase())}))}})}checkEmailAvailability(e){var r;return g(this,void 0,void 0,function*(){if(e.controls.email.valid){this.accountAvailability.email=this.registerModel.email;const n=yield this.authService.checkEmailAvailability(this.accountAvailability);"data"===n.type?this.emailAvailable=n.data:(e.controls.email.setErrors({emailTaken:!0}),null===(r=n.errors)||void 0===r||r.forEach(e=>{this.toastr.error(e.error,e.name.toUpperCase())}))}})}checkPasswordValid(e){e.controls.password.valid&&(this.passwordValid=!0)}checkConfirmPasswordValid(e){e.controls.passwordConfirmation.valid&&this.stringsMatch(e.value.password,e.value.passwordConfirmation)&&(this.confirmPasswordValid=!0)}stringsMatch(e,r){return e===r}}return e.\u0275fac=function(r){return new(r||e)(a.Pb(l.a),a.Pb(t.f),a.Pb(d.b))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-register"]],features:[a.Bb([l.a])],decls:61,vars:27,consts:[["id","register-background",1,"auth-wrapper","d-flex","no-block","justify-content-center","align-items-center"],[1,"auth-box","m-3","m-md-0"],[1,"logo"],[1,"font-medium","m-b-20"],[1,"row"],[1,"col-12"],["name","register",1,"form-horizontal","m-t-20",2,"min-width","350px"],["registerForm","ngForm"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text","font-weight-bold"],[1,"ti-user"],["type","text","name","username","placeholder","Username","aria-label","username","minlength","3","maxlength","255","pattern","^[A-Za-z0-9_-]*$","required","",1,"form-control",3,"ngModel","disabled","ngModelChange","blur"],["username","ngModel"],["class","input-group-append",4,"ngIf"],["class","invalid-feedback d-block",4,"ngIf"],[1,"ti-email"],["type","email","name","email","placeholder","Email","aria-label","email","minlength","6","maxlength","255","required","",1,"form-control",3,"ngModel","disabled","ngModelChange","blur"],["email","ngModel"],[1,"ti-key"],["type","password","name","password","placeholder","Password","aria-label","password","minlength","8","required","",1,"form-control",3,"ngModel","disabled","ngModelChange","blur"],["password","ngModel"],["type","password","name","passwordConfirmation","placeholder","Confirm Password","aria-label","passwordConfirmation","required","",1,"form-control",3,"ngModel","disabled","ngModelChange","blur"],["passwordConfirmation","ngModel"],[1,"form-group","text-center"],[1,"col-xs-12","p-b-20"],[1,"btn","btn-block","btn-lg","btn-primary",3,"keyup.enter","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"form-group","m-b-0","m-t-10"],[1,"col-sm-12","text-center"],["routerLink","/auth/login"],[1,"fas","fa-key"],[1,"input-group-append"],[1,"ti-check-box","text-success"],[1,"invalid-feedback","d-block"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,r){if(1&e){const e=a.Vb();a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div"),a.Ub(3,"div",2),a.Ub(4,"h5",3),a.Ec(5,"Register"),a.Tb(),a.Tb(),a.Ub(6,"div",4),a.Ub(7,"div",5),a.Ub(8,"form",6,7),a.Ub(10,"div",8),a.Ub(11,"div",9),a.Ub(12,"span",10),a.Qb(13,"i",11),a.Tb(),a.Tb(),a.Ub(14,"input",12,13),a.ec("ngModelChange",function(e){return r.registerModel.username=e})("blur",function(){a.wc(e);const n=a.tc(9);return r.checkUsernameAvailability(n.form)}),a.Tb(),a.Cc(16,f,3,0,"div",14),a.Cc(17,h,2,0,"div",15),a.Cc(18,v,2,0,"div",15),a.Cc(19,U,2,0,"div",15),a.Cc(20,T,2,0,"div",15),a.Cc(21,C,2,0,"div",15),a.Tb(),a.Ub(22,"div",8),a.Ub(23,"div",9),a.Ub(24,"span",10),a.Qb(25,"i",16),a.Tb(),a.Tb(),a.Ub(26,"input",17,18),a.ec("ngModelChange",function(e){return r.registerModel.email=e})("blur",function(){a.wc(e);const n=a.tc(9);return r.checkEmailAvailability(n.form)}),a.Tb(),a.Cc(28,w,3,0,"div",14),a.Cc(29,M,2,0,"div",15),a.Cc(30,k,2,0,"div",15),a.Cc(31,y,2,0,"div",15),a.Tb(),a.Ub(32,"div",8),a.Ub(33,"div",9),a.Ub(34,"span",10),a.Qb(35,"i",19),a.Tb(),a.Tb(),a.Ub(36,"input",20,21),a.ec("ngModelChange",function(e){return r.registerModel.password=e})("blur",function(){a.wc(e);const n=a.tc(9);return r.checkPasswordValid(n.form)}),a.Tb(),a.Cc(38,I,3,0,"div",14),a.Cc(39,E,2,0,"div",15),a.Cc(40,x,2,0,"div",15),a.Tb(),a.Ub(41,"div",8),a.Ub(42,"div",9),a.Ub(43,"span",10),a.Qb(44,"i",19),a.Tb(),a.Tb(),a.Ub(45,"input",22,23),a.ec("ngModelChange",function(e){return r.registerModel.password_confirmation=e})("blur",function(){a.wc(e);const n=a.tc(9);return r.checkConfirmPasswordValid(n.form)}),a.Tb(),a.Cc(47,P,3,0,"div",14),a.Cc(48,A,2,0,"div",15),a.Cc(49,L,2,0,"div",15),a.Tb(),a.Ub(50,"div",24),a.Ub(51,"div",25),a.Ub(52,"a",26),a.ec("keyup.enter",function(){a.wc(e);const n=a.tc(9);return r.register(n.form)})("click",function(){a.wc(e);const n=a.tc(9);return r.register(n.form)}),a.Cc(53,q,1,0,"span",27),a.Ec(54," REGISTER"),a.Tb(),a.Tb(),a.Tb(),a.Ub(55,"div",28),a.Ub(56,"div",29),a.Ub(57,"div",29),a.Ub(58,"a",30),a.Qb(59,"i",31),a.Ec(60," Login"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.tc(9),n=a.tc(15),t=a.tc(27),i=a.tc(37),o=a.tc(46);a.Cb(14),a.mc("ngModel",r.registerModel.username)("disabled",r.componentIsLoading),a.Cb(2),a.mc("ngIf",r.usernameAvailable),a.Cb(1),a.mc("ngIf",(null==n.errors?null:n.errors.required)&&e.form.touched),a.Cb(1),a.mc("ngIf",null==n.errors?null:n.errors.minlength),a.Cb(1),a.mc("ngIf",null==n.errors?null:n.errors.maxlength),a.Cb(1),a.mc("ngIf",null==n.errors?null:n.errors.pattern),a.Cb(1),a.mc("ngIf",null==n.errors?null:n.errors.usernameTaken),a.Cb(5),a.mc("ngModel",r.registerModel.email)("disabled",r.componentIsLoading),a.Cb(2),a.mc("ngIf",r.emailAvailable),a.Cb(1),a.mc("ngIf",(null==t.errors?null:t.errors.required)&&e.form.touched),a.Cb(1),a.mc("ngIf",null==t.errors?null:t.errors.minlength),a.Cb(1),a.mc("ngIf",null==t.errors?null:t.errors.emailTaken),a.Cb(5),a.mc("ngModel",r.registerModel.password)("disabled",r.componentIsLoading),a.Cb(2),a.mc("ngIf",r.passwordValid),a.Cb(1),a.mc("ngIf",(null==i.errors?null:i.errors.required)&&e.form.touched),a.Cb(1),a.mc("ngIf",null==i.errors?null:i.errors.minlength),a.Cb(5),a.mc("ngModel",r.registerModel.password_confirmation)("disabled",r.componentIsLoading),a.Cb(2),a.mc("ngIf",r.confirmPasswordValid),a.Cb(1),a.mc("ngIf",(null==o.errors?null:o.errors.required)&&e.form.touched),a.Cb(1),a.mc("ngIf",null==o.errors?null:o.errors.mustMatch),a.Cb(3),a.Hb("disabled",r.componentIsLoading),a.Cb(1),a.mc("ngIf",r.componentIsLoading)}},directives:[b.q,b.i,b.j,b.b,b.e,b.d,b.m,b.o,b.h,b.k,i.k,t.i],styles:["#register-background[_ngcontent-%COMP%]{background:url(/jotsauce-angular/snow-road.cfd541ab1cd649298600.jpg) no-repeat 50%}"]}),e})()}]}];let V=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(r){return new(r||e)},imports:[[i.b,b.c,t.j.forChild(Q),o.h]]}),e})()}}]);