<div class="bgimg">
    <mat-toolbar color="primary" class="mat-elevation-z24">
        <mat-toolbar-row>
            <div class="container-fluid">
                <div class="d-flex justify-content-between">
                    <div>
                        <h1>
                            Jot Sauce
                        </h1>
                    </div>
                    <div>
                        <button  aria-label="login" 
                            [routerLink]="['/login']"
                            class="mr-5"
                            mat-icon-button>
                                <mat-icon>login</mat-icon> Login
                        </button>
                    </div>
                </div>  
                
            </div>
                  
        </mat-toolbar-row>
    </mat-toolbar>
    
    <div class="container py-5" style="max-width: 420px;">
        <div class="row mx-auto py-5 my-5">
            <div class="col">
                <form name="register" #registerForm="ngForm">
                    <mat-card>
                        <mat-card-header>
                          <mat-card-title>Register</mat-card-title>
                        </mat-card-header>
                        <mat-card-content>
    
                            <div class="row">
                                <div class="col">
                                    <mat-form-field appearance="standard" class="mr-3 w-100">
                                        <mat-label>Username</mat-label>
                                        <input matInput 
                                            type="text" 
                                            placeholder="username"
                                            name="username"
                                            (keyup.enter)="register(registerForm.form)"
                                            (blur)="checkUsernameAvailability(registerForm.form)"
                                            [(ngModel)]="registerModel.username"
                                            #username="ngModel"
                                            minlength="3"
                                            maxlength="255"
                                            pattern="^[A-Za-z0-9_-]*$"
                                            required>
                                        <mat-icon matSuffix *ngIf="usernameAvailable">done</mat-icon>

                                        <mat-error *ngIf="username.errors?.required">Required</mat-error>
                                        <mat-error *ngIf="username.errors?.minlength">Must be at least 3 characters</mat-error>
                                        <mat-error *ngIf="username.errors?.maxlength">Cannot exceed 255 characters</mat-error>
                                        <mat-error *ngIf="username.errors?.pattern">Username can only contain letters, numbers, dashes, and underscores</mat-error>
                                        <mat-error *ngIf="username.errors?.usernameTaken">Username is already taken</mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
        
                            <div class="row">
                                <div class="col">
                                    <mat-form-field appearance="standard" class="mr-3 w-100">
                                        <mat-label>Email</mat-label>
                                        <input matInput 
                                            type="email" 
                                            placeholder="email@example.com"
                                            name="email"
                                            (keyup.enter)="register(registerForm.form)"
                                            (blur)="checkEmailAvailability(registerForm.form)"
                                            [(ngModel)]="registerModel.email"
                                            #email="ngModel"
                                            minlength="6"
                                            required>
                                        <mat-icon matSuffix *ngIf="emailAvailable">done</mat-icon>

                                        <mat-error *ngIf="email.errors?.required">Required</mat-error>
                                        <mat-error *ngIf="email.errors?.minlength">Must be at valid email address</mat-error>
                                        <mat-error *ngIf="email.errors?.emailTaken">Email is already taken or invalid</mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
        
                            <div class="row">
                                <div class="col">
                                    <mat-form-field appearance="standard" class="mr-3 w-100">
                                        <mat-label>Password</mat-label>
                                        <input matInput 
                                            type="password" 
                                            placeholder="password"
                                            name="password"
                                            (keyup.enter)="register(registerForm.form)"
                                            (blur)="checkPasswordValid(registerForm.form)"
                                            [(ngModel)]="registerModel.password"
                                            #password="ngModel"
                                            minlength="8"
                                            required>
                                        <mat-icon matSuffix *ngIf="passwordValid">done</mat-icon>

                                        <mat-error *ngIf="password.errors?.required">Required</mat-error>
                                        <mat-error *ngIf="password.errors?.minlength">Must be at least 8 characters</mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
    
                            <div class="row">
                                <div class="col">
                                    <mat-form-field appearance="standard" class="mr-3 w-100">
                                        <mat-label>Confirm Password</mat-label>
                                        <input matInput 
                                            type="password" 
                                            placeholder="password"
                                            name="passwordConfirmation"
                                            (keyup.enter)="register(registerForm.form)"
                                            (blur)="checkConfirmPasswordValid(registerForm.form)"
                                            [(ngModel)]="registerModel.password_confirmation"
                                            #passwordConfirmation="ngModel"
                                            required>
                                        <mat-icon matSuffix *ngIf="confirmPasswordValid">done</mat-icon>

                                        <mat-error *ngIf="passwordConfirmation.errors?.required">Required</mat-error>
                                        <mat-error *ngIf="passwordConfirmation.errors?.mustMatch">Passwords must match</mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
        
                        </mat-card-content>
                        <mat-card-actions class="text-center">
                            <button 
                                mat-raised-button 
                                color="accent"
                                (click)="register(registerForm.form)"
                                class="mr-3 my-3 w-100">
                                    REGISTER
                            </button>
                        </mat-card-actions>
                      </mat-card>
                </form>
            </div>
        </div>
    </div>

</div>